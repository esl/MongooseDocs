
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for MongooseIM - a mobile messaging platform with focus on performance and scalability">
      
      
        <meta name="author" content="Erlang Solutions">
      
      
        <link rel="canonical" href="https://esl.github.io/MongooseDocs/latest/latest/modules/mod_global_distrib/">
      
      
        <link rel="prev" href="../mod_extdisco/">
      
      
        <link rel="next" href="../mod_http_upload/">
      
      
      <link rel="icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.30">
    
    
      
        <title>mod_global_distrib - MongooseIM Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#module-description" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="MongooseIM Docs" class="md-header__button md-logo" aria-label="MongooseIM Docs" data-md-component="logo">
      
  <img src="../../MongooseIM_logo_white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MongooseIM Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              mod_global_distrib
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/esl/MongooseIM" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="MongooseIM Docs" class="md-nav__button md-logo" aria-label="MongooseIM Docs" data-md-component="logo">
      
  <img src="../../MongooseIM_logo_white.png" alt="logo">

    </a>
    MongooseIM Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/esl/MongooseIM" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/Installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/Quick-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Setup
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/Features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/Supported-standards/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Supported Standards
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/High-level-Architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    High-level Architecture
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/How-to-build/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Build MongooseIM from source code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/Docker-build/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to build and run MongooseIM docker image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/CETS-configure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to configure MongooseIM to use CETS instead of Mnesia
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/push-notifications/Push-notifications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Set up Push Notifications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/push-notifications/Push-notifications-client-side/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Set up Push Notifications on the client side
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/push-notifications/MongoosePush-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Set up MongoosePush
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/ICE_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Set up MongooseICE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/iOS_tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Build an iOS messaging app
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/Jingle-SIP-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Set up Jingle/SIP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/client-certificate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Set up SASL client certificate authentication
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Open XMPP Extensions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Open XMPP Extensions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../open-extensions/muc_light/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MUC light
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../open-extensions/inbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inbox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../open-extensions/smart-markers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Smart Markers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../open-extensions/token-reconnection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Token-based reconnection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../open-extensions/mam/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MAM
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/configuration-files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/general/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options: General
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/listen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options: Listen
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/auth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options: Auth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/internal-databases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options: Internal Databases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/outgoing-connections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options: Outgoing connections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/Services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options: Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/Modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options: Extension Modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/shaper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options: Shaper
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/acl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options: Acl
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options: Access
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/s2s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options: S2S
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/host_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options: Host config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/release-options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Options
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/Erlang-cookie-security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Erlang Cookie Security
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/TLS-hardening/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TLS Hardening
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/database-backends-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database Backends Configuration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Authentication Methods
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Authentication Methods
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/rdbms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RDBMS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/external/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    External
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/anonymous/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Anonymous
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/ldap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LDAP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/jwt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JWT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/http/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/pki/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PKI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/dummy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dummy
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Extension modules
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Extension modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_adhoc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_adhoc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_amp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_amp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_auth_token/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_auth_token
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_bind2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_bind2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_blocking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_blocking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_bosh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_bosh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_caps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_caps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_cache_users/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_cache_users
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_carboncopy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_carboncopy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_csi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_csi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_disco/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_disco
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_domain_isolation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_domain_isolation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_13" >
        
          
          <label class="md-nav__link" for="__nav_8_13" id="__nav_8_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    mod_event_pusher
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_13">
            <span class="md-nav__icon md-icon"></span>
            mod_event_pusher
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_event_pusher/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_event_pusher
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_event_pusher_http/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP backend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_event_pusher_push/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Push backend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_event_pusher_rabbit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RabbitMQ backend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_event_pusher_sns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SNS backend
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_extdisco/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_extdisco
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    mod_global_distrib
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    mod_global_distrib
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#module-description" class="md-nav__link">
    <span class="md-ellipsis">
      Module Description
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    <span class="md-ellipsis">
      How it works
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How it works">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#metadata-sharing" class="md-nav__link">
    <span class="md-ellipsis">
      Metadata sharing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Metadata sharing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redis-entries" class="md-nav__link">
    <span class="md-ellipsis">
      Redis entries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-routing" class="md-nav__link">
    <span class="md-ellipsis">
      Message routing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bounce" class="md-nav__link">
    <span class="md-ellipsis">
      Bounce
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Metrics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    <span class="md-ellipsis">
      Notes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#options" class="md-nav__link">
    <span class="md-ellipsis">
      Options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribglobal_host" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.global_host
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distriblocal_host" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.local_host
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribmessage_ttl" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.message_ttl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribhosts_refresh_interval" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.hosts_refresh_interval
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connections-options" class="md-nav__link">
    <span class="md-ellipsis">
      Connections' options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connections' options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionsendpoints" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.endpoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionsadvertised_endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.advertised_endpoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionsconnections_per_endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.connections_per_endpoint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionsendpoint_refresh_interval" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.endpoint_refresh_interval
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionsendpoint_refresh_interval_when_empty" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.endpoint_refresh_interval_when_empty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionsdisabled_gc_interval" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.disabled_gc_interval
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tls-options" class="md-nav__link">
    <span class="md-ellipsis">
      TLS options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TLS options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionstlscertfile" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.tls.certfile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionstlscacertfile" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.tls.cacertfile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionstlsciphers" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.tls.ciphers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionstlsdhfile" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.tls.dhfile
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis-session-storage-options" class="md-nav__link">
    <span class="md-ellipsis">
      Redis session storage options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redis session storage options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribredispool" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.redis.pool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribredisexpire_after" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.redis.expire_after
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribredisrefresh_after" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.redis.refresh_after
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-cache-options" class="md-nav__link">
    <span class="md-ellipsis">
      Database cache options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Database cache options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribcachecache_missed" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.cache.cache_missed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribcachedomain_lifetime_seconds" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.cache.domain_lifetime_seconds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribcachejid_lifetime_seconds" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.cache.jid_lifetime_seconds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribcachemax_jids" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.cache.max_jids
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-bouncing-options" class="md-nav__link">
    <span class="md-ellipsis">
      Message bouncing options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Message bouncing options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribbounceenabled" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.bounce.enabled
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribbounceresend_after_ms" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.bounce.resend_after_ms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribbouncemax_retries" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.bounce.max_retries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#global-distribution-and-service-discovery" class="md-nav__link">
    <span class="md-ellipsis">
      Global Distribution and Service Discovery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Example configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-mod_global_distrib" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring mod_global_distrib
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-dynomite" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Dynomite
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_http_upload/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_http_upload
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_inbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_inbox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_jingle_sip/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_jingle_sip
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_keystore/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_keystore
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_last/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_last
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_mam/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_mam
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_muc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_muc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_muc_log/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_muc_log
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_muc_light/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_muc_light
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_offline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_offline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_offline_stub/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_offline_stub
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_ping/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_ping
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_presence/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_presence
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_privacy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_privacy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_private/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_private
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_pubsub/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_pubsub
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_push_service_mongoosepush/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_push_service_mongoosepush
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_register/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_register
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_roster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_roster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_sasl2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_sasl2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_shared_roster_ldap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_shared_roster_ldap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_smart_markers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_smart_markers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_sic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_sic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_stream_management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_stream_management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_time/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_time
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_vcard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_vcard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mod_version/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_version
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    REST API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            REST API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rest-api/Client-frontend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Client/frontend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rest-api/Administration-backend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Administration backend
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    GraphQL API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            GraphQL API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../graphql-api/User-GraphQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../graphql-api/Admin-GraphQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Admin
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Operation and Maintenance
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Operation and Maintenance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/gdpr-considerations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GDPR considerations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Cluster-management-considerations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cluster management considerations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Cluster-configuration-and-node-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cluster configuration and node management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Logging-%26-monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging & monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Humio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging with Humio
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Logging-fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Rolling-upgrade/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rolling upgrade
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Cluster-restart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cluster restart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/MongooseIM-metrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metrics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/System-Metrics-Privacy-Policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Metrics Privacy Policy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/tls-distribution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distribution over TLS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/known-issues/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Known issues
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developer's Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Developer's Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/release_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release/Installation configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/Bootstrap-Scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bootstrap scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/Testing-MongooseIM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing MongooseIM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/Hooks-and-handlers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hooks and Handlers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/hooks_description/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hooks description
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/accumulators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accumulators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/Stanza-routing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stanza routing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/domain_management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Domain management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/mod_amp_developers_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_amp development
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/mod_muc_light_developers_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mod_muc_light developers doc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/SCRAM-serialization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SCRAM serialization format
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/xep_tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xep-tool usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/OpenSSL-and-FIPS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FIPS mode
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/Basic-iq-handler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic IQ Handler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/mongoose_wpool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mongoose_wpool
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Migration Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Migration Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/3.1.1_3.2.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.1.1 to 3.2.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/3.3.0_3.4.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.3.0 to 3.4.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/3.5.0_3.6.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.5.0 to 3.6.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/3.6.0_3.7.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.6.0 to 3.7.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/3.7.0_4.0.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.7.0 to 4.0.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/4.0.0_4.0.1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.0.0 to 4.0.1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/4.0.1_4.1.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.0.1 to 4.1.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/4.1.0_4.2.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.1.0 to 4.2.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/4.2.0_5.0.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.2.0 to 5.0.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/5.0.0_5.1.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.0.0 to 5.1.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/5.1.0_6.0.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.1.0 to 6.0.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/6.0.0_6.1.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.0.0 to 6.1.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/6.1.0_6.2.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.1.0 to 6.2.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/6.2.0_6.2.1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.2.0 to 6.2.1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/6.2.1_x.x.x/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.2.1 to x.x.x
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/jid-from-mam-muc-script/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MAM MUC migration helper
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Contributions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributions to the Ecosystem
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../History/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MongooseIM History
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#module-description" class="md-nav__link">
    <span class="md-ellipsis">
      Module Description
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    <span class="md-ellipsis">
      How it works
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How it works">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#metadata-sharing" class="md-nav__link">
    <span class="md-ellipsis">
      Metadata sharing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Metadata sharing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redis-entries" class="md-nav__link">
    <span class="md-ellipsis">
      Redis entries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-routing" class="md-nav__link">
    <span class="md-ellipsis">
      Message routing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bounce" class="md-nav__link">
    <span class="md-ellipsis">
      Bounce
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Metrics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    <span class="md-ellipsis">
      Notes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#options" class="md-nav__link">
    <span class="md-ellipsis">
      Options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribglobal_host" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.global_host
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distriblocal_host" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.local_host
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribmessage_ttl" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.message_ttl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribhosts_refresh_interval" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.hosts_refresh_interval
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connections-options" class="md-nav__link">
    <span class="md-ellipsis">
      Connections' options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connections' options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionsendpoints" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.endpoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionsadvertised_endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.advertised_endpoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionsconnections_per_endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.connections_per_endpoint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionsendpoint_refresh_interval" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.endpoint_refresh_interval
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionsendpoint_refresh_interval_when_empty" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.endpoint_refresh_interval_when_empty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionsdisabled_gc_interval" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.disabled_gc_interval
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tls-options" class="md-nav__link">
    <span class="md-ellipsis">
      TLS options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TLS options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionstlscertfile" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.tls.certfile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionstlscacertfile" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.tls.cacertfile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionstlsciphers" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.tls.ciphers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribconnectionstlsdhfile" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.connections.tls.dhfile
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis-session-storage-options" class="md-nav__link">
    <span class="md-ellipsis">
      Redis session storage options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redis session storage options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribredispool" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.redis.pool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribredisexpire_after" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.redis.expire_after
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribredisrefresh_after" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.redis.refresh_after
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database-cache-options" class="md-nav__link">
    <span class="md-ellipsis">
      Database cache options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Database cache options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribcachecache_missed" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.cache.cache_missed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribcachedomain_lifetime_seconds" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.cache.domain_lifetime_seconds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribcachejid_lifetime_seconds" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.cache.jid_lifetime_seconds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribcachemax_jids" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.cache.max_jids
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-bouncing-options" class="md-nav__link">
    <span class="md-ellipsis">
      Message bouncing options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Message bouncing options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribbounceenabled" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.bounce.enabled
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribbounceresend_after_ms" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.bounce.resend_after_ms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_global_distribbouncemax_retries" class="md-nav__link">
    <span class="md-ellipsis">
      modules.mod_global_distrib.bounce.max_retries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#global-distribution-and-service-discovery" class="md-nav__link">
    <span class="md-ellipsis">
      Global Distribution and Service Discovery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Example configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-mod_global_distrib" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring mod_global_distrib
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-dynomite" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Dynomite
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>mod_global_distrib</h1>

<h2 id="module-description">Module Description</h2>
<p>This module enables global distribution of a single XMPP domain.
With <code>mod_global_distrib</code>, multiple distinct MongooseIM clusters can share a single domain name and route messages to the specific datacenter where the recipient is available.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This module does not support <a href="../../configuration/general/#generalhost_types">dynamic domains</a>.</p>
</div>
<h2 id="how-it-works">How it works</h2>
<p>There are multiple subsystems that cooperate to enable global distribution:</p>
<h3 id="metadata-sharing">Metadata sharing</h3>
<p>Sharing of metadata is done by leveraging a database with cross-datacenter replication.
Currently, only Redis is supported, with <a href="https://github.com/Netflix/dynomite">Dynomite</a> layer for replication.
The most important metadata stored in the database is a <strong>session/routing table</strong>.
The table stores mappings between currently logged users' JIDs and datacenters on which they are logged in.
Because access to the session table is very frequent, its entries are additionally cached on each node.</p>
<p>To preserve consistency between database instances, all data is stored with a set expiration time and is periodically refreshed.
Each node of each cluster is responsible for refreshing its own data.
Thus, in an event of a netsplit, datacenters' information about unreachable datacenters' users will expire, as those users are now unreachable; but once the connection is reestablished, the data will be replicated again as datacenters refresh their entries.
Additionally, to prevent edge cases where an incoming message is received and replied to before the datacenter learns about the sender's host, an incoming message also carries information about its origin which may be used to temporarily update the local routing table.</p>
<h4 id="redis-entries">Redis entries</h4>
<p>Following structures are stored in Redis:</p>
<ul>
<li>JID mappings are stored as normal key-value entries, where user's JID (full and bare) is the key, and the value is the local hostname where the user is logged in.
Example: <code>"user1@example.com/res" -&gt; "dc2.example.com"</code>.</li>
<li>Domains of components and services registered on the globally distributed host are stored in per-node set structures where the key is <code>&lt;local_host&gt;#&lt;node_name&gt;#{domains}</code>, and the values are the domain names.
Example: <code>"dc1.example.com#mongoose1@dc1.example.com#{domains}" -&gt; {"muc1.example.com", "muc2.example.com"}</code>.</li>
<li>Domains of non-hidden components and services (see the <a href="../../configuration/listen/#xmpp-components-listenservice"><code>XMPP Components</code></a> documentation) are stored in per-node set structures where the key is <code>&lt;local_host&gt;#&lt;node_name&gt;#{public_domains}</code>, and the values are the domain names.</li>
<li>Declared endpoints available on a node are similarly stored in a per-node set structure where the key is <code>&lt;local_host&gt;#&lt;node_name&gt;#{endpoints}</code> and the values represent the TCP endpoints of the node.
Example: <code>"dc1.example.com#mongoose1@dc1.example.com#{endpoints}" -&gt; {"172.16.2.14#8231", "2001:0db8:85a3:0000:0000:8a2e:0370:7334#8882"}</code>.</li>
<li>Nodes that comprise a host are stored in a set structure with key <code>&lt;local_host&gt;#{nodes}</code> and values being the names of the nodes.
Example: <code>"dc2.example.com#{nodes}" -&gt; {"node1@dc2.example.com", "node3@dc2.example.com"}</code>.</li>
<li>Hosts are stored in a set with key <code>hosts</code> and values being the individual local XMPP domains.
Example: <code>"hosts" -&gt; {"dc1.example.com", "dc2.example.com"}</code>.</li>
</ul>
<h3 id="message-routing">Message routing</h3>
<p><code>mod_global_distrib</code> establishes its own listeners and dedicated TCP/TLS connections for message routing.
Each node listens on preconfigured endpoints, where each node in a datacenter can have any number of endpoints, including none.
The endpoints are shared between all datacenters.
If a node becomes unavailable, its endpoint entries in the database will expire and will be read once the node comes back online.</p>
<p>Connections between nodes in distinct datacenters are opened on the first request and then maintained as long as the destination endpoint is present in Redis.
When a node needs to connect to a remote cluster, specified number of connections are opened to every endpoint reported by that datacenter.
Global distribution features automatic rebalancing feature that will "disable" connections when their respective endpoints disappear from Redis.
A new pool of connections is created each time a new endpoint is recognised.
Whenever a node receives a message that is determined (by consulting the session table) to be destined for another datacenter, the routing procedure in the current datacenter is interrupted, the message is transported to the other datacenter via the dedicated connections, and the routing procedure is restarted there by a dedicated (but potentially short lived) worker process bound to the sender's JID (or subdomain if the sender's JIDs does not belong to the globally distributed domain).
Client's process binds itself to a connection to a remote datacenter on first use, and henceforth always uses this connection to route messages directed to this datacenter.
This - along with the dedicated worker process on the receiver's side - ensures that simple cross-datacenter messages between two entities are delivered in their sending order.</p>
<p>It may happen that a message is rerouted through multiple datacenters (e.g. if the user has reconnected to a different datacenter while the message was already in flight).
Messages are given a TTL parameter by the source datacenter so that they cannot be rerouted indefinitely.
The TTL is decreased on each reroute.
Note that in the edge case of multi-datacenter routing, the messages may be received out-of-order at the destination datacenter.</p>
<h3 id="bounce">Bounce</h3>
<p>Consider the following edge case: user <strong>U1</strong> logged into datacenter <strong>DC2</strong> and then quickly reconnected to datacenter <strong>DC3</strong>.
Because session table has not yet been replicated, <strong>DC2</strong> does not see <strong>U1</strong> in the session table, while a different datacenter <strong>DC1</strong> still sees <strong>U1</strong> logged into <strong>DC2</strong>.
When <strong>U2</strong> logged into <strong>DC1</strong> and sent a message to <strong>U1</strong>, it will now be rerouted to <strong>DC2</strong> even though the user is now available at <strong>DC3</strong>.</p>
<p><img alt="State after U1's reconnection" src="../mod_global_distrib_bounce_example.svg" /></p>
<p>Bounce mechanism solves this and similar edge cases by storing messages for which there is no known routing in the current datacenter.
The stored messages are then assigned a bounce-TTL value and periodically - with backoff - are attempted to be routed again.
In the example above, the message from <strong>U2</strong> would be temporarily stored at <strong>DC2</strong> and rerouted successfully once <strong>DC2</strong> learns (via replication) that <strong>U1</strong> is available at <strong>DC3</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Bounce mechanism, similarly to multi-datacenter routing, may result in out-of-order messages being received at the destination datacenter.</p>
</div>
<h3 id="metrics">Metrics</h3>
<p>Global distribution modules expose several per-datacenter metrics that can be used to monitor health of the system. All metrics begin with <strong>global.mod_global_distrib</strong> prefix:</p>
<ul>
<li><code>outgoing.messages.&lt;host&gt;</code>: number of cross-datacenter messages sent by this cluster to a given host.</li>
<li><code>incoming.messages.&lt;host&gt;</code>: number of cross-datacenter messages received by this cluster from a given host.</li>
<li><code>incoming.transfer_time.&lt;host&gt;</code> <em>[us]</em>: time elapsed between sending and receiving the message over the network from a given host.
  The duration is calculated using wall clock times on sender and receiver node.</li>
<li><code>outgoing.queue_time.&lt;host&gt;</code> <em>[us]</em>: time elapsed while message waits in a queue of a sender's connection to a given host.
  High value of this metric may be remedied by increasing the number of connections to other hosts.</li>
<li><code>incoming.queue_time</code> <em>[us]</em>: time elapsed while message waits in routing worker's queue.
  This value is not reported per-host as routing workers are bound to the sender's JID.</li>
<li><code>incoming.established</code>: incremented when a new connection is established from another cluster.
  At this point the origin domain of the cluster is not known, so this metric is common for all of them.</li>
<li><code>incoming.first_packet.&lt;host&gt;</code>: incremented when a receiver process gets the first packet from a remote cluster and learns its local domain.</li>
<li><code>incoming.closed.&lt;host&gt;</code>: incremented when an incoming connection gets closed.</li>
<li><code>incoming.errored.&lt;host&gt;</code>: incremented when an incoming connection gets closed with an error.</li>
<li><code>outgoing.established.&lt;host&gt;</code>: incremented when an outgoing connection is established.</li>
<li><code>outgoing.closed.&lt;host&gt;</code>: incremented when an outgoing connection gets closed.</li>
<li><code>outgoing.errored.&lt;host&gt;</code>: incremented when an outgoing connection gets closed with an error.</li>
<li><code>mapping_fetch_time</code> <em>[us]</em>: time spent on fetching an entry from the session table, cached or otherwise.</li>
<li><code>mapping_fetches</code>: number of fetches of session table entries, cached or otherwise.</li>
<li><code>mapping_cache_misses</code>: number of fetches of session table entries that hit the database.</li>
<li><code>delivered_with_ttl</code>: A histogram of packets' TTL values recorded when the global routing layer decides to route them locally (but not due to TTL = 0).</li>
<li><code>stop_ttl_zero</code>: A number of packets that weren't processed by global routing due to TTL=0.</li>
<li><code>bounce_queue_size</code>: a number of messages enqueued for rerouting (the value of this metric is individual per MongooseIM node!).</li>
</ul>
<h2 id="notes">Notes</h2>
<ul>
<li>You should only start <code>mod_global_distrib</code> by configuring it under <code>modules</code> option in <code>mongooseim.toml</code>. Do not add it as host-specific module via <code>host_config</code>.</li>
<li>Do not use <code>mod_offline</code> on domains given via <code>global_host</code> or <code>local_host</code> options, as it will decrease messaging robustness; the users logged in other datacenters will not be registered as available by <code>mod_offline</code>, and so the messages will not be flushed.</li>
</ul>
<h2 id="options">Options</h2>
<h3 id="modulesmod_global_distribglobal_host"><code>modules.mod_global_distrib.global_host</code></h3>
<ul>
<li><strong>Syntax:</strong> string</li>
<li><strong>Default:</strong> none, this option is mandatory</li>
<li><strong>Example:</strong> <code>global_host = "example.com"</code></li>
</ul>
<p>The XMPP domain that will be shared between datacenters.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This needs to be one of the domains given in <code>general.hosts</code> option in <code>mongooseim.toml</code>.</p>
</div>
<h3 id="modulesmod_global_distriblocal_host"><code>modules.mod_global_distrib.local_host</code></h3>
<ul>
<li><strong>Syntax:</strong> string</li>
<li><strong>Default:</strong> none, this option is mandatory</li>
<li><strong>Example:</strong> <code>local_host = "datacenter1.example.com"</code></li>
</ul>
<p>XMPP domain that maps uniquely to the local datacenter; it will be used for inter-center routing.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This needs to be one of the domains given in <code>general.hosts</code> option in <code>mongooseim.toml</code>.</p>
</div>
<h3 id="modulesmod_global_distribmessage_ttl"><code>modules.mod_global_distrib.message_ttl</code></h3>
<ul>
<li><strong>Syntax:</strong> non-negative integer</li>
<li><strong>Default:</strong> <code>4</code></li>
<li><strong>Example:</strong> <code>message_ttl = 5</code></li>
</ul>
<p>Number of times a message can be rerouted between datacenters.</p>
<h3 id="modulesmod_global_distribhosts_refresh_interval"><code>modules.mod_global_distrib.hosts_refresh_interval</code></h3>
<ul>
<li><strong>Syntax:</strong> non-negative integer, value given in milliseconds</li>
<li><strong>Default:</strong> <code>3000</code></li>
<li><strong>Example:</strong> <code>hosts_refresh_interval = 3000</code></li>
</ul>
<p>The interval telling how often Redis should be asked if new hosts appeared.</p>
<h3 id="connections-options">Connections' options</h3>
<h4 id="modulesmod_global_distribconnectionsendpoints"><code>modules.mod_global_distrib.connections.endpoints</code></h4>
<ul>
<li><strong>Syntax:</strong> Array of TOML tables with the following keys: <code>host</code> and <code>port</code>, and the following values: {host = <code>string</code>, port = <code>non_negative_integer</code>}</li>
<li><strong>Default:</strong> <code>[{host = "LocalHost", port = 5555}]</code></li>
<li><strong>Example:</strong> <code>endpoints = [{host = "172.16.0.2", port = 5555}]</code></li>
</ul>
<p>A list of endpoints on which the server will listen for connections.
<code>host</code> can be given as a hostname, in which case it will be resolved to an IP address on module start.
The endpoint list will be shared with other datacenters via the replicated backend.</p>
<h4 id="modulesmod_global_distribconnectionsadvertised_endpoints"><code>modules.mod_global_distrib.connections.advertised_endpoints</code></h4>
<ul>
<li><strong>Syntax:</strong> Array of TOML tables with the following keys: <code>host</code> and <code>port</code>, and the following values: {host = <code>string</code>, port = <code>non_negative_integer</code>}</li>
<li><strong>Default:</strong> not set, the value of <code>endpoints</code> is used (without resolution).</li>
<li><strong>Example:</strong> <code>advertised_endpoints = [{host = "172.16.0.2", port = 5555}]</code></li>
</ul>
<p>A list of endpoints which will be advertised in Redis and therefore used to establish connection with this node by other nodes. The host may be either IP or domain, just like in case of endpoints. The difference is, the domain name won't be resolved but inserted directly to the mappings backend instead.</p>
<h4 id="modulesmod_global_distribconnectionsconnections_per_endpoint"><code>modules.mod_global_distrib.connections.connections_per_endpoint</code></h4>
<ul>
<li><strong>Syntax:</strong> non-negative integer</li>
<li><strong>Default:</strong> <code>1</code></li>
<li><strong>Example:</strong> <code>connections_per_endpoint = 30</code></li>
</ul>
<p>Number of outgoing connections that will be established from the current node to each endpoint assigned to a remote domain.</p>
<h4 id="modulesmod_global_distribconnectionsendpoint_refresh_interval"><code>modules.mod_global_distrib.connections.endpoint_refresh_interval</code></h4>
<ul>
<li><strong>Syntax:</strong> positive integer, value given in seconds</li>
<li><strong>Default:</strong> <code>60</code></li>
<li><strong>Example:</strong> <code>endpoint_refresh_interval = 30</code></li>
</ul>
<p>An interval between remote endpoint list refresh (and connection rebalancing).
A separate timer is maintained for every remote domain.</p>
<h4 id="modulesmod_global_distribconnectionsendpoint_refresh_interval_when_empty"><code>modules.mod_global_distrib.connections.endpoint_refresh_interval_when_empty</code></h4>
<ul>
<li><strong>Syntax:</strong> positive integer, value given in seconds</li>
<li><strong>Default:</strong> <code>3</code></li>
<li><strong>Example:</strong> <code>endpoint_refresh_interval_when_empty = 3</code></li>
</ul>
<p>Endpoint refresh interval, when array of endpoints is empty.</p>
<h4 id="modulesmod_global_distribconnectionsdisabled_gc_interval"><code>modules.mod_global_distrib.connections.disabled_gc_interval</code></h4>
<ul>
<li><strong>Syntax:</strong> positive integer, value given in seconds</li>
<li><strong>Default:</strong> <code>60</code></li>
<li><strong>Example:</strong> <code>disabled_gc_interval = 60</code></li>
</ul>
<p>An interval between disabled endpoints "garbage collection".
It means that disabled endpoints are periodically verified and if Global Distribution detects that connections is no longer alive, the connection pool is closed completely.</p>
<h3 id="tls-options">TLS options</h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default <code>tls</code> is disabled and all data will be sent via standard TCP connections.</p>
</div>
<p>To enable TLS support, the <code>cacertfile</code> and <code>certfile</code> options have to be present.
These options will be passed to the <code>fast_tls</code> driver.</p>
<h4 id="modulesmod_global_distribconnectionstlscertfile"><code>modules.mod_global_distrib.connections.tls.certfile</code></h4>
<ul>
<li><strong>Syntax:</strong> string, path in the file system</li>
<li><strong>Default:</strong> none, this options is mandatory to enable TLS support</li>
<li><strong>Example:</strong> <code>certfile = "priv/dc1.pem"</code></li>
</ul>
<h4 id="modulesmod_global_distribconnectionstlscacertfile"><code>modules.mod_global_distrib.connections.tls.cacertfile</code></h4>
<ul>
<li><strong>Syntax:</strong> string, path in the file system</li>
<li><strong>Default:</strong> none, this options is mandatory to enable TLS support</li>
<li><strong>Example:</strong> <code>cacertfile = "priv/ca.pem"</code></li>
</ul>
<h4 id="modulesmod_global_distribconnectionstlsciphers"><code>modules.mod_global_distrib.connections.tls.ciphers</code></h4>
<ul>
<li><strong>Syntax:</strong> string</li>
<li><strong>Default:</strong> <code>"TLSv1.2:TLSv1.3"</code></li>
<li><strong>Example:</strong> <code>ciphers = "ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384"</code></li>
</ul>
<p>Cipher suites to use with StartTLS or TLS. Please refer to the <a href="https://www.openssl.org/docs/man1.0.2/man1/ciphers.html">OpenSSL documentation</a> for the cipher string format.</p>
<h4 id="modulesmod_global_distribconnectionstlsdhfile"><code>modules.mod_global_distrib.connections.tls.dhfile</code></h4>
<ul>
<li><strong>Syntax:</strong> string, path in the file system</li>
<li><strong>Default:</strong> not set</li>
<li><strong>Example:</strong> <code>dhfile = "dh.pem"</code></li>
</ul>
<h3 id="redis-session-storage-options">Redis session storage options</h3>
<h4 id="modulesmod_global_distribredispool"><code>modules.mod_global_distrib.redis.pool</code></h4>
<ul>
<li><strong>Syntax:</strong> string</li>
<li><strong>Default:</strong> <code>"global_distrib"</code></li>
<li><strong>Example:</strong> <code>pool = "global_distrib"</code></li>
</ul>
<p>Name of the redis pool defined in <a href="../../configuration/outgoing-connections/">outgoing pools</a>.</p>
<h4 id="modulesmod_global_distribredisexpire_after"><code>modules.mod_global_distrib.redis.expire_after</code></h4>
<ul>
<li><strong>Syntax:</strong> positive integer</li>
<li><strong>Default:</strong> <code>120</code></li>
<li><strong>Example:</strong> <code>expire_after = 120</code></li>
</ul>
<p>Number of seconds after which a session entry written by this cluster will expire.</p>
<h4 id="modulesmod_global_distribredisrefresh_after"><code>modules.mod_global_distrib.redis.refresh_after</code></h4>
<ul>
<li><strong>Syntax:</strong> non-negative integer</li>
<li><strong>Default:</strong> <code>60</code></li>
<li><strong>Example:</strong> <code>refresh_after = 60</code></li>
</ul>
<p>Number of seconds after which session's expiration timer will be refreshed.</p>
<h3 id="database-cache-options">Database cache options</h3>
<p>Options for caching database lookups, by default no options are passed.</p>
<h4 id="modulesmod_global_distribcachecache_missed"><code>modules.mod_global_distrib.cache.cache_missed</code></h4>
<ul>
<li><strong>Syntax:</strong> boolean</li>
<li><strong>Default:</strong> <code>true</code></li>
<li><strong>Example:</strong> <code>cache_missed = true</code></li>
</ul>
<p>Determines whether an internal session cache should cache lookup failures.
When <code>false</code>, only successful database lookups will result in the value being cached.
Changing this option has great negative impact on performance.</p>
<h4 id="modulesmod_global_distribcachedomain_lifetime_seconds"><code>modules.mod_global_distrib.cache.domain_lifetime_seconds</code></h4>
<ul>
<li><strong>Syntax:</strong> non-negative integer, value given in seconds</li>
<li><strong>Default:</strong> <code>600</code></li>
<li><strong>Example:</strong> <code>domain_lifetime_seconds = 600</code></li>
</ul>
<p>How long should subdomain mappings be cached (e.g. <code>muc.example.com -&gt; datacenter1.test</code>).</p>
<h4 id="modulesmod_global_distribcachejid_lifetime_seconds"><code>modules.mod_global_distrib.cache.jid_lifetime_seconds</code></h4>
<ul>
<li><strong>Syntax:</strong> non-negative integer, value given in seconds</li>
<li><strong>Default:</strong> <code>5</code></li>
<li><strong>Example:</strong> <code>jid_lifetime_seconds = 5</code></li>
</ul>
<p>How long should full and bare JID mappings be cached (e.g. <code>user1@example.com/res1 -&gt; datacenter1.test</code>).</p>
<h4 id="modulesmod_global_distribcachemax_jids"><code>modules.mod_global_distrib.cache.max_jids</code></h4>
<ul>
<li><strong>Syntax:</strong> non-negative integer</li>
<li><strong>Default:</strong> <code>10000</code></li>
<li><strong>Example:</strong> <code>max_jids = 10000</code></li>
</ul>
<p>The maximum number of JID entries that can be stored in cache at any point in time.</p>
<h3 id="message-bouncing-options">Message bouncing options</h3>
<h4 id="modulesmod_global_distribbounceenabled"><code>modules.mod_global_distrib.bounce.enabled</code></h4>
<ul>
<li><strong>Syntax:</strong> boolean</li>
<li><strong>Default:</strong> <code>true</code></li>
<li><strong>Example:</strong> <code>enabled = false</code></li>
</ul>
<p>Whether message bouncing should be enabled or not.
Setting this option to <code>false</code> makes other <code>bounce</code> options have no effect.</p>
<h4 id="modulesmod_global_distribbounceresend_after_ms"><code>modules.mod_global_distrib.bounce.resend_after_ms</code></h4>
<ul>
<li><strong>Syntax:</strong> non-negative integer</li>
<li><strong>Default:</strong> <code>200</code></li>
<li><strong>Example:</strong> <code>resend_after_ms = 200</code></li>
</ul>
<p>Time after which message will be resent in case of delivery error.</p>
<h4 id="modulesmod_global_distribbouncemax_retries"><code>modules.mod_global_distrib.bounce.max_retries</code></h4>
<ul>
<li><strong>Syntax:</strong> non-negative integer</li>
<li><strong>Default:</strong> <code>4</code></li>
<li><strong>Example:</strong> <code>max_retries = 4</code></li>
</ul>
<p>Number of times message delivery will be retried in case of errors.</p>
<h3 id="global-distribution-and-service-discovery">Global Distribution and Service Discovery</h3>
<p><code>mod_global_distrib</code> extension relies on <a href="../mod_disco/"><code>mod_disco</code></a>'s option <code>users_can_see_hidden_services</code>, when provided. If it is not configured, the default value is <code>true</code>. <code>mod_disco</code> does not have to be enabled for <code>mod_global_distrib</code> to work, as this parameter is used only for processing Disco requests by Global Distribution.</p>
<h2 id="example-configuration">Example configuration</h2>
<h3 id="configuring-mod_global_distrib">Configuring mod_global_distrib</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">[modules.mod_global_distrib]</span>
<span class="w">  </span><span class="n">global_host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;example.com&quot;</span>
<span class="w">  </span><span class="n">local_host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;datacenter1.example.com&quot;</span>
<span class="w">  </span><span class="n">connections</span><span class="p">.</span><span class="n">endpoints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="n">host</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;172.16.0.2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">5555</span><span class="p">}]</span>
<span class="w">  </span><span class="n">connections</span><span class="p">.</span><span class="n">advertised_endpoints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="n">host</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;172.16.0.2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">5555</span><span class="p">}]</span>
<span class="w">  </span><span class="n">connections</span><span class="p">.</span><span class="n">tls</span><span class="p">.</span><span class="n">certfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;priv/dc1.pem&quot;</span>
<span class="w">  </span><span class="n">connections</span><span class="p">.</span><span class="n">tls</span><span class="p">.</span><span class="n">cacertfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;priv/ca.pem&quot;</span>
<span class="w">  </span><span class="n">connections</span><span class="p">.</span><span class="n">connections_per_endpoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span>
<span class="w">  </span><span class="n">cache</span><span class="p">.</span><span class="n">domain_lifetime_seconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">60</span>
<span class="w">  </span><span class="n">bounce</span><span class="p">.</span><span class="n">resend_after_ms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">300</span>
<span class="w">  </span><span class="n">bounce</span><span class="p">.</span><span class="n">max_retries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span>
<span class="w">  </span><span class="n">redis</span><span class="p">.</span><span class="n">pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;global_distrib&quot;</span>
</code></pre></div></td></tr></table></div>
<h3 id="configuring-dynomite">Configuring Dynomite</h3>
<p>For more information about Dynomite configuration, consult <a href="https://github.com/Netflix/dynomite/wiki">Dynomite wiki</a>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">dyn_o_mite</span><span class="p">:</span>
<span class="w">  </span><span class="nt">datacenter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dc1</span>
<span class="w">  </span><span class="nt">rack</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rack1</span>
<span class="w">  </span><span class="nt">dyn_listen</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.16.0.3:8101</span>
<span class="w">  </span><span class="nt">dyn_seeds</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">124.12.4.4:8101:rack1:dc2:1383429731</span>
<span class="w">  </span><span class="nt">listen</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.16.0.3:8102</span>
<span class="w">  </span><span class="nt">servers</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.16.0.4:6379:1</span>
<span class="w">  </span><span class="nt">tokens</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;138342973&#39;</span>
<span class="w">  </span><span class="nt">secure_server_option</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">datacenter</span>
<span class="w">  </span><span class="nt">pem_key_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dynomite.pem</span>
<span class="w">  </span><span class="nt">data_store</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">  </span><span class="nt">stats_listen</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0:22221</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">dyn_o_mite</span><span class="p">:</span>
<span class="w">  </span><span class="nt">datacenter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dc2</span>
<span class="w">  </span><span class="nt">rack</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rack1</span>
<span class="w">  </span><span class="nt">dyn_listen</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">124.12.4.4:8101</span>
<span class="w">  </span><span class="nt">dyn_seeds</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.16.0.3:8101:rack1:dc1:1383429731</span>
<span class="w">  </span><span class="nt">listen</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">124.12.4.4:8102</span>
<span class="w">  </span><span class="nt">servers</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">124.12.4.5:6379:1</span>
<span class="w">  </span><span class="nt">tokens</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;138342973&#39;</span>
<span class="w">  </span><span class="nt">secure_server_option</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">datacenter</span>
<span class="w">  </span><span class="nt">pem_key_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dynomite.pem</span>
<span class="w">  </span><span class="nt">data_store</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">  </span><span class="nt">stats_listen</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0:22221</span>
</code></pre></div></td></tr></table></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/r/mongooseim/mongooseim/" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/esl/MongooseIM" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>