
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="MongooseIM is a mobile messaging platform with focus on performance and scalability">
      
      
        <meta name="author" content="Erlang Solutions">
      
      
        <link rel="canonical" href="https://esl.github.io/MongooseDocs/latest/latest/modules/mod_pubsub/">
      
      <link rel="icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.5">
    
    
      
        <title>mod_pubsub - MongooseIM</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4a0965b7.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#what-is-pubsub" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="MongooseIM" class="md-header__button md-logo" aria-label="MongooseIM" data-md-component="logo">
      
  <img src="../../MongooseIM_logo_white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MongooseIM
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              mod_pubsub
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/esl/MongooseIM" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="MongooseIM" class="md-nav__button md-logo" aria-label="MongooseIM" data-md-component="logo">
      
  <img src="../../MongooseIM_logo_white.png" alt="logo">

    </a>
    MongooseIM
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/esl/MongooseIM" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/Installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/Quick-setup/" class="md-nav__link">
        Quick Setup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/Features/" class="md-nav__link">
        Features
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/Supported-standards/" class="md-nav__link">
        Supported Standards
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/High-level-Architecture/" class="md-nav__link">
        High-level Architecture
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/How-to-build/" class="md-nav__link">
        How to Build MongooseIM from source code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/push-notifications/Push-notifications/" class="md-nav__link">
        How to Set up Push Notifications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/push-notifications/Push-notifications-client-side/" class="md-nav__link">
        How to Set up Push Notifications on the client side
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/push-notifications/MongoosePush-setup/" class="md-nav__link">
        How to Set up MongoosePush
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/ICE_tutorial/" class="md-nav__link">
        How to Set up MongooseICE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/iOS_tutorial/" class="md-nav__link">
        How to Build an iOS messaging app
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/Jingle-SIP-setup/" class="md-nav__link">
        How to Set up Jingle/SIP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/client-certificate/" class="md-nav__link">
        How to Set up SASL client certificate authentication
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Open XMPP Extensions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Open XMPP Extensions" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Open XMPP Extensions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../open-extensions/muc_light/" class="md-nav__link">
        MUC light
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../open-extensions/inbox/" class="md-nav__link">
        Inbox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../open-extensions/smart-markers/" class="md-nav__link">
        Smart Markers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../open-extensions/token-reconnection/" class="md-nav__link">
        Token-based reconnection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../open-extensions/mam/" class="md-nav__link">
        MAM
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/configuration-files/" class="md-nav__link">
        Configuration Files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/general/" class="md-nav__link">
        Options: General
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/listen/" class="md-nav__link">
        Options: Listen
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/auth/" class="md-nav__link">
        Options: Auth
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/outgoing-connections/" class="md-nav__link">
        Options: Outgoing connections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/Services/" class="md-nav__link">
        Options: Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/Modules/" class="md-nav__link">
        Options: Extension Modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/shaper/" class="md-nav__link">
        Options: Shaper
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/acl/" class="md-nav__link">
        Options: Acl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/access/" class="md-nav__link">
        Options: Access
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/s2s/" class="md-nav__link">
        Options: S2S
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/host_config/" class="md-nav__link">
        Options: Host config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/release-options/" class="md-nav__link">
        Release Options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/Erlang-cookie-security/" class="md-nav__link">
        Erlang Cookie Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/TLS-hardening/" class="md-nav__link">
        TLS Hardening
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/database-backends-configuration/" class="md-nav__link">
        Database Backends Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Authentication Methods
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Authentication Methods" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Authentication Methods
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/rdbms/" class="md-nav__link">
        RDBMS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/external/" class="md-nav__link">
        External
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/anonymous/" class="md-nav__link">
        Anonymous
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/ldap/" class="md-nav__link">
        LDAP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/jwt/" class="md-nav__link">
        JWT
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/riak/" class="md-nav__link">
        Riak
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/http/" class="md-nav__link">
        HTTP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/pki/" class="md-nav__link">
        PKI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-methods/dummy/" class="md-nav__link">
        Dummy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Extension modules
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Extension modules" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Extension modules
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_adhoc/" class="md-nav__link">
        mod_adhoc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_amp/" class="md-nav__link">
        mod_amp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_auth_token/" class="md-nav__link">
        mod_auth_token
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_blocking/" class="md-nav__link">
        mod_blocking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_bosh/" class="md-nav__link">
        mod_bosh
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_caps/" class="md-nav__link">
        mod_caps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_cache_users/" class="md-nav__link">
        mod_cache_users
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_carboncopy/" class="md-nav__link">
        mod_carboncopy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_commands/" class="md-nav__link">
        mod_commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_csi/" class="md-nav__link">
        mod_csi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_disco/" class="md-nav__link">
        mod_disco
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_domain_isolation/" class="md-nav__link">
        mod_domain_isolation
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_13" type="checkbox" id="__nav_8_13" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8_13">
          mod_event_pusher
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="mod_event_pusher" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_13">
          <span class="md-nav__icon md-icon"></span>
          mod_event_pusher
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_event_pusher/" class="md-nav__link">
        mod_event_pusher
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_event_pusher_http/" class="md-nav__link">
        HTTP backend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_event_pusher_push/" class="md-nav__link">
        Push backend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_event_pusher_rabbit/" class="md-nav__link">
        RabbitMQ backend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_event_pusher_sns/" class="md-nav__link">
        SNS backend
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_extdisco/" class="md-nav__link">
        mod_extdisco
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_global_distrib/" class="md-nav__link">
        mod_global_distrib
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_http_upload/" class="md-nav__link">
        mod_http_upload
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_inbox/" class="md-nav__link">
        mod_inbox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_inbox_commands/" class="md-nav__link">
        mod_inbox_commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_jingle_sip/" class="md-nav__link">
        mod_jingle_sip
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_keystore/" class="md-nav__link">
        mod_keystore
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_last/" class="md-nav__link">
        mod_last
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_mam/" class="md-nav__link">
        mod_mam
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_muc/" class="md-nav__link">
        mod_muc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_muc_commands/" class="md-nav__link">
        mod_muc_commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_muc_log/" class="md-nav__link">
        mod_muc_log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_muc_light/" class="md-nav__link">
        mod_muc_light
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_muc_light_commands/" class="md-nav__link">
        mod_muc_light_commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_offline/" class="md-nav__link">
        mod_offline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_offline_stub/" class="md-nav__link">
        mod_offline_stub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_ping/" class="md-nav__link">
        mod_ping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_privacy/" class="md-nav__link">
        mod_privacy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_private/" class="md-nav__link">
        mod_private
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          mod_pubsub
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        mod_pubsub
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-pubsub" class="md-nav__link">
    What is PubSub?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-description" class="md-nav__link">
    Module Description
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#options" class="md-nav__link">
    Options
  </a>
  
    <nav class="md-nav" aria-label="Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubiqdisctype" class="md-nav__link">
    modules.mod_pubsub.iqdisc.type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubhost" class="md-nav__link">
    modules.mod_pubsub.host
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubbackend" class="md-nav__link">
    modules.mod_pubsub.backend
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubaccess_createnode" class="md-nav__link">
    modules.mod_pubsub.access_createnode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubmax_items_node" class="md-nav__link">
    modules.mod_pubsub.max_items_node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubmax_subscriptions_node" class="md-nav__link">
    modules.mod_pubsub.max_subscriptions_node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubnodetree" class="md-nav__link">
    modules.mod_pubsub.nodetree
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubignore_pep_from_offline" class="md-nav__link">
    modules.mod_pubsub.ignore_pep_from_offline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsublast_item_cache" class="md-nav__link">
    modules.mod_pubsub.last_item_cache
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubplugins" class="md-nav__link">
    modules.mod_pubsub.plugins
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubpep_mapping" class="md-nav__link">
    modules.mod_pubsub.pep_mapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubdefault_node_config" class="md-nav__link">
    modules.mod_pubsub.default_node_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubitem_publisher" class="md-nav__link">
    modules.mod_pubsub.item_publisher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubsync_broadcast" class="md-nav__link">
    modules.mod_pubsub.sync_broadcast
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-backend" class="md-nav__link">
    Cache Backend
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-configuration" class="md-nav__link">
    Example Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nodetrees" class="md-nav__link">
    Nodetrees
  </a>
  
    <nav class="md-nav" aria-label="Nodetrees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tree" class="md-nav__link">
    "tree"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dag" class="md-nav__link">
    "dag"
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plugins" class="md-nav__link">
    Plugins
  </a>
  
    <nav class="md-nav" aria-label="Plugins">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flat" class="md-nav__link">
    "flat"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hometree" class="md-nav__link">
    "hometree"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pep" class="md-nav__link">
    "pep"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dag_1" class="md-nav__link">
    "dag"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#push" class="md-nav__link">
    "push"
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    Metrics
  </a>
  
    <nav class="md-nav" aria-label="Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overall-pubsub-action-metrics" class="md-nav__link">
    Overall PubSub action metrics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend-operations" class="md-nav__link">
    Backend operations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_push_service_mongoosepush/" class="md-nav__link">
        mod_push_service_mongoosepush
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_register/" class="md-nav__link">
        mod_register
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_roster/" class="md-nav__link">
        mod_roster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_shared_roster_ldap/" class="md-nav__link">
        mod_shared_roster_ldap
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_smart_markers/" class="md-nav__link">
        mod_smart_markers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_sic/" class="md-nav__link">
        mod_sic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_stream_management/" class="md-nav__link">
        mod_stream_management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_time/" class="md-nav__link">
        mod_time
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_vcard/" class="md-nav__link">
        mod_vcard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_version/" class="md-nav__link">
        mod_version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          REST API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="REST API" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          REST API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rest-api/Client-frontend/" class="md-nav__link">
        Client/frontend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rest-api/Metrics-backend/" class="md-nav__link">
        Metrics backend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rest-api/Administration-backend/" class="md-nav__link">
        Administration backend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../rest-api/Dynamic-domains/" class="md-nav__link">
        Dynamic domains
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Operation and Maintenance
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Operation and Maintenance" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Operation and Maintenance
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/gdpr-considerations/" class="md-nav__link">
        GDPR considerations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Cluster-management-considerations/" class="md-nav__link">
        Cluster management considerations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Cluster-configuration-and-node-management/" class="md-nav__link">
        Cluster configuration and node management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Logging-%26-monitoring/" class="md-nav__link">
        Logging & monitoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Logging/" class="md-nav__link">
        Logging configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Humio/" class="md-nav__link">
        Logging with Humio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Logging-fields/" class="md-nav__link">
        Logging fields
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Rolling-upgrade/" class="md-nav__link">
        Rolling upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/Cluster-restart/" class="md-nav__link">
        Cluster restart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/MongooseIM-metrics/" class="md-nav__link">
        Metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/System-Metrics-Privacy-Policy/" class="md-nav__link">
        System Metrics Privacy Policy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/tls-distribution/" class="md-nav__link">
        Distribution over TLS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../operation-and-maintenance/known-issues/" class="md-nav__link">
        Known issues
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Developer's Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Developer's Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Developer's Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/release_config/" class="md-nav__link">
        Release/Installation configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/Bootstrap-Scripts/" class="md-nav__link">
        Bootstrap scripts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/Testing-MongooseIM/" class="md-nav__link">
        Testing MongooseIM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/Hooks-and-handlers/" class="md-nav__link">
        Hooks and Handlers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/hooks_description/" class="md-nav__link">
        Hooks description
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/accumulators/" class="md-nav__link">
        Accumulators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/Stanza-routing/" class="md-nav__link">
        Stanza routing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/domain_management/" class="md-nav__link">
        Domain management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/mod_amp_developers_guide/" class="md-nav__link">
        mod_amp development
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/mod_muc_light_developers_guide/" class="md-nav__link">
        mod_muc_light developers doc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/SCRAM-serialization/" class="md-nav__link">
        SCRAM serialization format
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/xep_tool/" class="md-nav__link">
        xep-tool usage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/OpenSSL-and-FIPS/" class="md-nav__link">
        FIPS mode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/Basic-iq-handler/" class="md-nav__link">
        Basic IQ Handler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developers-guide/mongoose_wpool/" class="md-nav__link">
        mongoose_wpool
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          Migration Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Migration Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Migration Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/3.1.1_3.2.0/" class="md-nav__link">
        3.1.1 to 3.2.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/3.3.0_3.4.0/" class="md-nav__link">
        3.3.0 to 3.4.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/3.5.0_3.6.0/" class="md-nav__link">
        3.5.0 to 3.6.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/3.6.0_3.7.0/" class="md-nav__link">
        3.6.0 to 3.7.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/3.7.0_4.0.0/" class="md-nav__link">
        3.7.0 to 4.0.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/4.0.0_4.0.1/" class="md-nav__link">
        4.0.0 to 4.0.1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/4.0.1_4.1.0/" class="md-nav__link">
        4.0.1 to 4.1.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/4.1.0_4.2.0/" class="md-nav__link">
        4.1.0 to 4.2.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/4.2.0_5.0.0/" class="md-nav__link">
        4.2.0 to 5.0.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/5.0.0_5.1.0/" class="md-nav__link">
        5.0.0 to 5.1.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrations/jid-from-mam-muc-script/" class="md-nav__link">
        MAM MUC migration helper
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Contributions/" class="md-nav__link">
        Contributions to the Ecosystem
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../History/" class="md-nav__link">
        MongooseIM History
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-pubsub" class="md-nav__link">
    What is PubSub?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-description" class="md-nav__link">
    Module Description
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#options" class="md-nav__link">
    Options
  </a>
  
    <nav class="md-nav" aria-label="Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubiqdisctype" class="md-nav__link">
    modules.mod_pubsub.iqdisc.type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubhost" class="md-nav__link">
    modules.mod_pubsub.host
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubbackend" class="md-nav__link">
    modules.mod_pubsub.backend
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubaccess_createnode" class="md-nav__link">
    modules.mod_pubsub.access_createnode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubmax_items_node" class="md-nav__link">
    modules.mod_pubsub.max_items_node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubmax_subscriptions_node" class="md-nav__link">
    modules.mod_pubsub.max_subscriptions_node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubnodetree" class="md-nav__link">
    modules.mod_pubsub.nodetree
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubignore_pep_from_offline" class="md-nav__link">
    modules.mod_pubsub.ignore_pep_from_offline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsublast_item_cache" class="md-nav__link">
    modules.mod_pubsub.last_item_cache
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubplugins" class="md-nav__link">
    modules.mod_pubsub.plugins
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubpep_mapping" class="md-nav__link">
    modules.mod_pubsub.pep_mapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubdefault_node_config" class="md-nav__link">
    modules.mod_pubsub.default_node_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubitem_publisher" class="md-nav__link">
    modules.mod_pubsub.item_publisher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modulesmod_pubsubsync_broadcast" class="md-nav__link">
    modules.mod_pubsub.sync_broadcast
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-backend" class="md-nav__link">
    Cache Backend
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-configuration" class="md-nav__link">
    Example Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nodetrees" class="md-nav__link">
    Nodetrees
  </a>
  
    <nav class="md-nav" aria-label="Nodetrees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tree" class="md-nav__link">
    "tree"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dag" class="md-nav__link">
    "dag"
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plugins" class="md-nav__link">
    Plugins
  </a>
  
    <nav class="md-nav" aria-label="Plugins">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flat" class="md-nav__link">
    "flat"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hometree" class="md-nav__link">
    "hometree"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pep" class="md-nav__link">
    "pep"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dag_1" class="md-nav__link">
    "dag"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#push" class="md-nav__link">
    "push"
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    Metrics
  </a>
  
    <nav class="md-nav" aria-label="Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overall-pubsub-action-metrics" class="md-nav__link">
    Overall PubSub action metrics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend-operations" class="md-nav__link">
    Backend operations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/esl/MongooseIM/edit/master/doc/modules/mod_pubsub.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



  <h1>mod_pubsub</h1>

<h2 id="what-is-pubsub">What is PubSub?</h2>
<p>PubSub is a design pattern which mostly promotes a loose coupling between two kinds of entities - publishers and subscribers.
Like their names suggest, in the pubsub world we have publishers who fire events, and subscribers who wish to be notified about those events when publishers push data.
There might be several subscribers, several publishers, and even several channels (or nodes) where the events are sent.</p>
<h2 id="module-description">Module Description</h2>
<p>This module implements <a href="http://www.xmpp.org/extensions/xep-0060.html">XEP-0060: Publish-Subscribe</a>.
Due to the complexity of the protocol, the PubSub engine makes successive calls to the <code>nodetree</code> and <code>node plugins</code> in order to check the validity of requests, perform the corresponding action and return a result or appropriate error.
Such an architecture makes it much easier to write custom pubsub plugins and add new storage backends.
It's all about tailoring PubSub to your needs!</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This module does not support <a href="../../configuration/general/#generalhost_types">dynamic domains</a>.</p>
</div>
<h2 id="options">Options</h2>
<h3 id="modulesmod_pubsubiqdisctype"><code>modules.mod_pubsub.iqdisc.type</code></h3>
<ul>
<li><strong>Syntax:</strong> string, one of <code>"one_queue"</code>, <code>"no_queue"</code>, <code>"queues"</code>, <code>"parallel"</code></li>
<li><strong>Default:</strong> <code>"one_queue"</code></li>
</ul>
<p>Strategy to handle incoming stanzas. For details, please refer to
<a href="../../configuration/Modules/#iq-processing-policies">IQ processing policies</a>.</p>
<h3 id="modulesmod_pubsubhost"><code>modules.mod_pubsub.host</code></h3>
<ul>
<li><strong>Syntax:</strong> string</li>
<li><strong>Default:</strong> <code>"pubsub.@HOST@"</code></li>
<li><strong>Example:</strong> <code>host = "pubsub.localhost"</code></li>
</ul>
<p>Subdomain for Pubsub service to reside under.
<code>@HOST@</code> is replaced with each served domain.</p>
<h3 id="modulesmod_pubsubbackend"><code>modules.mod_pubsub.backend</code></h3>
<ul>
<li><strong>Syntax:</strong> string, one of <code>"mnesia"</code>, <code>"rdbms"</code></li>
<li><strong>Default:</strong> <code>"mnesia"</code></li>
<li><strong>Example:</strong> <code>backend = "rdbms"</code></li>
</ul>
<p>Database backend to use.</p>
<h3 id="modulesmod_pubsubaccess_createnode"><code>modules.mod_pubsub.access_createnode</code></h3>
<ul>
<li><strong>Syntax:</strong> string, rule name, or <code>"all"</code></li>
<li><strong>Default:</strong> <code>"all"</code></li>
<li><strong>Example:</strong> <code>access_createnode = "all"</code></li>
</ul>
<p>Specifies who is allowed to create pubsub nodes. The access rule referenced here needs to be defined in the <a href="../../configuration/access/">access</a> section.</p>
<h3 id="modulesmod_pubsubmax_items_node"><code>modules.mod_pubsub.max_items_node</code></h3>
<ul>
<li><strong>Syntax:</strong> non-negative integer</li>
<li><strong>Default:</strong> <code>10</code></li>
<li><strong>Example:</strong> <code>max_items_node = 10</code></li>
</ul>
<p>Defines the maximum number of items that can be stored in a node.</p>
<h3 id="modulesmod_pubsubmax_subscriptions_node"><code>modules.mod_pubsub.max_subscriptions_node</code></h3>
<ul>
<li><strong>Syntax:</strong> non-negative integer</li>
<li><strong>Default:</strong> not specified (no limit)</li>
<li><strong>Example:</strong> <code>max_subscriptions_node = 10</code></li>
</ul>
<p>The maximum number of subscriptions managed by a node. By default there is no limit.</p>
<h3 id="modulesmod_pubsubnodetree"><code>modules.mod_pubsub.nodetree</code></h3>
<ul>
<li><strong>Syntax:</strong> string</li>
<li><strong>Default:</strong> <code>"tree"</code></li>
<li><strong>Example:</strong> <code>nodetree = "tree"</code></li>
</ul>
<p>Specifies the storage and organisation of the pubsub nodes. See the section below.</p>
<h3 id="modulesmod_pubsubignore_pep_from_offline"><code>modules.mod_pubsub.ignore_pep_from_offline</code></h3>
<ul>
<li><strong>Syntax:</strong> boolean</li>
<li><strong>Default:</strong> <code>true</code></li>
<li><strong>Example:</strong> <code>ignore_pep_from_offline = false</code></li>
</ul>
<p>Specifies whether or not we should get last published PEP items from users in our roster which are offline when we connect.
The default option is <code>true</code> hence we will get only the last items from the online contacts.</p>
<h3 id="modulesmod_pubsublast_item_cache"><code>modules.mod_pubsub.last_item_cache</code></h3>
<ul>
<li><strong>Syntax:</strong> string, one of <code>"mnesia"</code>, <code>"rdbms"</code>, <code>"false"</code></li>
<li><strong>Default:</strong> <code>"false"</code></li>
<li><strong>Example:</strong> <code>last_item_cache = "mnesia"</code></li>
</ul>
<p>If enabled, PubSub will cache the last published items in the nodes. It may increase PubSub performance but at a price of an increased memory usage.</p>
<h3 id="modulesmod_pubsubplugins"><code>modules.mod_pubsub.plugins</code></h3>
<ul>
<li><strong>Syntax:</strong> array of strings</li>
<li><strong>Default:</strong> <code>["flat"]</code></li>
<li><strong>Example:</strong> <code>plugins = ["flat", "pep"]</code></li>
</ul>
<p>List of enabled pubsub plugins.</p>
<h3 id="modulesmod_pubsubpep_mapping"><code>modules.mod_pubsub.pep_mapping</code></h3>
<ul>
<li><strong>Syntax:</strong> Array of TOML tables with the following keys: <code>"namespace"</code>, <code>"node"</code> and string values.</li>
<li><strong>Default:</strong> <code>[]</code></li>
<li><strong>Example:</strong> <code>pep_mapping = [{namespace = "urn:xmpp:microblog:0", node = "mb"}]</code></li>
</ul>
<p>This permits creating a Key-Value list to define a custom node plugin on a given PEP namespace.
E.g. pair <code>{"urn:xmpp:microblog:0", "mb"}</code> will use module <code>node_mb</code> instead of <code>node_pep</code> when the specified namespace is used.</p>
<h3 id="modulesmod_pubsubdefault_node_config"><code>modules.mod_pubsub.default_node_config</code></h3>
<ul>
<li><strong>Syntax:</strong> TOML table with the following values: string, boolean or non-negative integer.</li>
<li><strong>Default:</strong> <code>{}</code></li>
<li><strong>Example:</strong> <code>default_node_config = {deliver_payloads = true, max_payload_size = 10000, node_type = "leaf"}</code></li>
</ul>
<p>Overrides the default node configuration, regardless of the node plugin.
Node configuration still uses the default configuration defined by the node plugin, and overrides any items by the value defined in this configurable list.</p>
<p>The possible options, altogether with their default values for each node plugin, are listed in the table below:</p>
<table>
<thead>
<tr>
<th></th>
<th>syntax</th>
<th>node_flat / node_hometree</th>
<th>node_pep</th>
<th>node_dag</th>
<th>node_push</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>access_model</code></td>
<td>non-empty string</td>
<td><code>open</code></td>
<td><code>presence</code></td>
<td><code>open</code></td>
<td><code>whitelist</code></td>
</tr>
<tr>
<td><code>deliver_notifications</code></td>
<td>boolean</td>
<td><code>true</code></td>
<td><code>true</code></td>
<td><code>true</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>deliver_payloads</code></td>
<td>boolean</td>
<td><code>true</code></td>
<td><code>true</code></td>
<td><code>true</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>max_items</code></td>
<td>non-negative integer</td>
<td><code>10</code></td>
<td><code>1</code></td>
<td><code>10</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>max_payload_size</code></td>
<td>non-negative integer</td>
<td><code>60000</code></td>
<td><code>60000</code></td>
<td><code>60000</code></td>
<td><code>60000</code></td>
</tr>
<tr>
<td><code>node_type</code></td>
<td>non-empty string</td>
<td>N/A</td>
<td>N/A</td>
<td><code>leaf</code></td>
<td>N/A</td>
</tr>
<tr>
<td><code>notification_type</code></td>
<td>non-empty string</td>
<td><code>headline</code></td>
<td><code>headline</code></td>
<td><code>headline</code></td>
<td><code>headline</code></td>
</tr>
<tr>
<td><code>notify_config</code></td>
<td>boolean</td>
<td><code>false</code></td>
<td><code>false</code></td>
<td><code>false</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>notify_delete</code></td>
<td>boolean</td>
<td><code>false</code></td>
<td><code>false</code></td>
<td><code>false</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>notify_retract</code></td>
<td>boolean</td>
<td><code>false</code></td>
<td><code>false</code></td>
<td><code>false</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>persist_items</code></td>
<td>boolean</td>
<td><code>true</code></td>
<td><code>true</code></td>
<td><code>true</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>presence_based_delivery</code></td>
<td>boolean</td>
<td><code>false</code></td>
<td><code>true</code></td>
<td><code>false</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>publish_model</code></td>
<td>non-empty string</td>
<td><code>publishers</code></td>
<td><code>publishers</code></td>
<td><code>publishers</code></td>
<td><code>open</code></td>
</tr>
<tr>
<td><code>purge_offline</code></td>
<td>boolean</td>
<td><code>false</code></td>
<td><code>false</code></td>
<td><code>false</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>roster_groups_allowed</code></td>
<td>non-empty string</td>
<td><code>[]</code></td>
<td><code>[]</code></td>
<td><code>[]</code></td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>send_last_published_item</code></td>
<td>non-empty string</td>
<td><code>never</code></td>
<td><code>on_sub_and_presence</code></td>
<td><code>never</code></td>
<td><code>on_sub_and_presence</code></td>
</tr>
<tr>
<td><code>subscribe</code></td>
<td>boolean</td>
<td><code>true</code></td>
<td><code>true</code></td>
<td><code>true</code></td>
<td><code>true</code></td>
</tr>
</tbody>
</table>
<h3 id="modulesmod_pubsubitem_publisher"><code>modules.mod_pubsub.item_publisher</code></h3>
<ul>
<li><strong>Syntax:</strong> boolean</li>
<li><strong>Default:</strong> <code>false</code></li>
<li><strong>Example:</strong> <code>item_publisher = false</code></li>
</ul>
<p>When enabled, a JID of the publisher will be saved in the item metadata.
This effectively makes them an owner of this item.</p>
<h3 id="modulesmod_pubsubsync_broadcast"><code>modules.mod_pubsub.sync_broadcast</code></h3>
<ul>
<li><strong>Syntax:</strong> boolean</li>
<li><strong>Default:</strong> <code>false</code></li>
<li><strong>Example:</strong> <code>sync_broadcast = false</code></li>
</ul>
<p>If false, routing of notifications to subscribers is done in a separate Erlang process. As a consequence, some notifications <em>may</em> arrive to the subscribers in the wrong order (however, the two events would have to be published at the exact same time).</p>
<h3 id="cache-backend">Cache Backend</h3>
<p>Caching is disabled by default.
You may enable it by specifying the backend it should use.
It is not coupled with the main DB backend, so it is possible to store the cached data in <code>mnesia</code>, while the actual PubSub information is kept in RDBMS (and vice versa!).</p>
<h2 id="example-configuration">Example Configuration</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">[modules.mod_pubsub]</span><span class="w"></span>
<span class="w">  </span><span class="n">access_createnode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;pubsub_createnode&quot;</span><span class="w"></span>
<span class="w">  </span><span class="n">ignore_pep_from_offline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w"></span>
<span class="w">  </span><span class="n">backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;rdbms&quot;</span><span class="w"></span>
<span class="w">  </span><span class="n">last_item_cache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;mnesia&quot;</span><span class="w"></span>
<span class="w">  </span><span class="n">max_items_node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span><span class="w"></span>
<span class="w">  </span><span class="n">plugins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;flat&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;pep&quot;</span><span class="p">]</span><span class="w"></span>

<span class="w">  </span><span class="k">[[modules.mod_pubsub.pep_mapping]]</span><span class="w"></span>
<span class="w">    </span><span class="n">namespace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;urn:xmpp:microblog:0&quot;</span><span class="w"></span>
<span class="w">    </span><span class="n">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;mb&quot;</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<h2 id="nodetrees">Nodetrees</h2>
<p>Called on <code>get</code>, <code>create</code> and <code>delete</code> node.
Only one nodetree can be used per host and is shared by all node plugins.</p>
<h3 id="tree"><code>"tree"</code></h3>
<p>Stores nodes in a tree structure.
Every node name must be formatted like a UNIX path (e.g. <code>/top/middle/leaf</code>).
When a node is created, its direct ancestor must already exist, so in order to create <code>/top/middle/leaf</code>, <code>/top/middle</code> is needed.
A user may create any top-level node.
A user may create a subnode of a node, only if they own it or it was created by the service.</p>
<h3 id="dag"><code>"dag"</code></h3>
<p>Provides experimental support for <a href="http://xmpp.org/extensions/xep-0248.html">XEP-0248: PubSub Collection Nodes</a>.
In this case you should also add the <code>"dag"</code> node plugin as default, for example: <code>plugins = ["dag", "flat", "hometree", "pep"]</code>.</p>
<h2 id="plugins">Plugins</h2>
<p>They handle affiliations, subscriptions and items and also provide default node conguration and features.
PubSub clients can define which plugin to use when creating a node by adding <code>type='plugin-name'</code> attribute to the create stanza element.
If such an attribute is not specified, the default plugin will be the first on the plugin list.</p>
<h3 id="flat"><code>"flat"</code></h3>
<p>No node hierarchy.
It handles the standard PubSub case.</p>
<h3 id="hometree"><code>"hometree"</code></h3>
<p>Uses the exact same features as the flat plugin but additionally organises nodes in a tree.
Basically it follows a scheme similar to the filesystem's structure.
Every user can create nodes in their own home root: e.g <code>/home/user</code>.
Each node can contain items and/or sub-nodes.</p>
<h3 id="pep"><code>"pep"</code></h3>
<p>Implementation of <a href="http://xmpp.org/extensions/xep-0163.html">XEP-0163: Personal Eventing Protocol</a>.
In this case, items are not persisted but kept in an in-memory cache.
When the <code>pep</code> plugin is enabled, a user can have their own node (exposed as their bare jid) with a common namespace.
Requires module <code>mod_caps</code> to be enabled.</p>
<p>For <a href="https://xmpp.org/extensions/xep-0384.html">XEP-0384: OMEMO Encryption</a>, it might be required to configure the <code>access_model</code> to <code>open</code> or override the default <code>access_model</code> in the following way:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">[modules.mod_pubsub]</span><span class="w"></span>
<span class="w">  </span><span class="n">access_createnode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;pubsub_createnode&quot;</span><span class="w"></span>
<span class="w">  </span><span class="n">plugins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;pep&quot;</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="n">default_node_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">access_model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;open&quot;</span><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<h3 id="dag_1"><code>"dag"</code></h3>
<p>Implementation of <a href="https://xmpp.org/extensions/xep-0248.html">XEP-0248: PubSub Collection Nodes</a>.
Every node takes a place in a collection and becomes either a collection node (and have only sub-nodes) or a leaf node (contains only items).</p>
<h3 id="push"><code>"push"</code></h3>
<p>Special node type that may be used as a target node for <a href="https://xmpp.org/extensions/xep-0357.html">XEP-0357: Push Notifications</a> capable services (e.g. <code>mod_event_pusher_push</code>).
For each published notification, a hook <code>push_notification</code> is run.
You may enable as many modules that support this hook (all module with <code>mod_push_service_*</code> name prefix) as you like (see for example <code>mod_push_service_mongoosepush</code>).
This node type <strong>requires</strong> <code>publish-options</code> with at least <code>device_id</code> and <code>service</code> fields supplied.</p>
<h2 id="metrics">Metrics</h2>
<p>If you'd like to learn more about metrics in MongooseIM, please visit the <a href="../../operation-and-maintenance/MongooseIM-metrics/">MongooseIM metrics</a> page.</p>
<h3 id="overall-pubsub-action-metrics">Overall PubSub action metrics</h3>
<p>For every PubSub action, like node creation, subscription, publication the following metrics are available:</p>
<ul>
<li>count - a spiral metric showing the number of given action invocations</li>
<li>errors - a spiral metric counting the errors for a given action</li>
<li>time - a histogram metric showing the time it took to finish the action in case of success</li>
</ul>
<p>Below there is a table describing all metrics related to PubSub actions</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description (when it gets incremented)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[HOST, pubsub, get, affiliations, TYPE]</code></td>
<td>When node's affiliations are read</td>
</tr>
<tr>
<td><code>[HOST, pubsub, get, configure, TYPE]</code></td>
<td>When node's configuration is read</td>
</tr>
<tr>
<td><code>[HOST, pubsub, get, default, TYPE]</code></td>
<td>When node's defaults are read</td>
</tr>
<tr>
<td><code>[HOST, pubsub, get, items, TYPE]</code></td>
<td>When node's items are read</td>
</tr>
<tr>
<td><code>[HOST, pubsub, get, options, TYPE]</code></td>
<td>When node's options are read</td>
</tr>
<tr>
<td><code>[HOST, pubsub, get, subscriptions, TYPE]</code></td>
<td>When node's subscriptions are read</td>
</tr>
<tr>
<td><code>[HOST, pubsub, set, affiliations, TYPE]</code></td>
<td>When node's subscriptions are set</td>
</tr>
<tr>
<td><code>[HOST, pubsub, set, configure, TYPE]</code></td>
<td>When node's configuration is set</td>
</tr>
<tr>
<td><code>[HOST, pubsub, set, create, TYPE]</code></td>
<td>When node is created</td>
</tr>
<tr>
<td><code>[HOST, pubsub, set, delete, TYPE]</code></td>
<td>When node is deleted</td>
</tr>
<tr>
<td><code>[HOST, pubsub, set, options, TYPE]</code></td>
<td>When node's options are set</td>
</tr>
<tr>
<td><code>[HOST, pubsub, set, publish, TYPE]</code></td>
<td>When an item is published</td>
</tr>
<tr>
<td><code>[HOST, pubsub, set, purge, TYPE]</code></td>
<td>When node's items are purged</td>
</tr>
<tr>
<td><code>[HOST, pubsub, set, retract, TYPE]</code></td>
<td>When node's items are retracted</td>
</tr>
<tr>
<td><code>[HOST, pubsub, set, subscribe, TYPE]</code></td>
<td>When a subscriber subscribes to a node</td>
</tr>
<tr>
<td><code>[HOST, pubsub, set, subscriptions, TYPE]</code></td>
<td>When a subscription is set (for instance accepted)</td>
</tr>
<tr>
<td><code>[HOST, pubsub, set, unsubscribe, TYPE]</code></td>
<td>When a subscriber unsubscribes</td>
</tr>
</tbody>
</table>
<p>Where:</p>
<ul>
<li><code>HOST</code> is the XMPP host for which <code>mod_pubsub</code> is running. Can be set to <code>global</code> if all metrics are set to be global.</li>
<li><code>TYPE</code> is one of the following <code>count</code>, <code>errors</code>, <code>time</code> (described above the table)</li>
</ul>
<h3 id="backend-operations">Backend operations</h3>
<p>The are also more detailed metrics measuring execution time of backend operations.</p>
<p>Metrics for these actions may be found under <code>mod_pubsub_db</code> subkey.</p>
<table>
<thead>
<tr>
<th>Backend action</th>
<th>Description (when it gets incremented)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>get_state</code></td>
<td>User's state for a specific node is fetched.</td>
</tr>
<tr>
<td><code>get_states</code></td>
<td>Node's states are fetched.</td>
</tr>
<tr>
<td><code>get_states_by_lus</code></td>
<td>Nodes' states for user + domain are fetched.</td>
</tr>
<tr>
<td><code>get_states_by_bare</code></td>
<td>Nodes' states for bare JID are fetched.</td>
</tr>
<tr>
<td><code>get_states_by_full</code></td>
<td>Nodes' states for full JID are fetched.</td>
</tr>
<tr>
<td><code>get_own_nodes_states</code></td>
<td>State data for user's nodes is fetched.</td>
</tr>
<tr>
<td><code>create_node</code></td>
<td>A node's owner is set.</td>
</tr>
<tr>
<td><code>del_node</code></td>
<td>All data related to a node is removed.</td>
</tr>
<tr>
<td><code>get_items</code></td>
<td>Node's items are fetched.</td>
</tr>
<tr>
<td><code>get_item</code></td>
<td>A specific item from a node is fetched.</td>
</tr>
<tr>
<td><code>add_item</code></td>
<td>An item is upserted into a node.</td>
</tr>
<tr>
<td><code>set_item</code></td>
<td>An item is updated in a node.</td>
</tr>
<tr>
<td><code>del_item</code></td>
<td>An item is deleted from a node.</td>
</tr>
<tr>
<td><code>del_items</code></td>
<td>Specified items are deleted from a node.</td>
</tr>
<tr>
<td><code>set_node</code></td>
<td>A node is upserted.</td>
</tr>
<tr>
<td><code>find_node_by_id</code></td>
<td>A node is fetched by its ID.</td>
</tr>
<tr>
<td><code>find_nodes_by_key</code></td>
<td>Nodes are fetched by key.</td>
</tr>
<tr>
<td><code>find_node_by_name</code></td>
<td>A node is fetched by its name.</td>
</tr>
<tr>
<td><code>del_node</code></td>
<td>A node is deleted.</td>
</tr>
<tr>
<td><code>get_subnodes</code></td>
<td>Subnodes of a node are fetched.</td>
</tr>
<tr>
<td><code>get_subnodes_tree</code></td>
<td>Full tree of subnodes of a node is fetched.</td>
</tr>
<tr>
<td><code>get_parentnodes_tree</code></td>
<td>All parents of a node are fetched.</td>
</tr>
</tbody>
</table>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../mod_private/" class="md-footer__link md-footer__link--prev" aria-label="Previous: mod_private" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              mod_private
            </div>
          </div>
        </a>
      
      
        
        <a href="../mod_push_service_mongoosepush/" class="md-footer__link md-footer__link--next" aria-label="Next: mod_push_service_mongoosepush" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              mod_push_service_mongoosepush
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://hub.docker.com/r/mongooseim/mongooseim/" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/esl/MongooseIM" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.85cb4492.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.431f3d41.min.js"></script>
      
    
  </body>
</html>